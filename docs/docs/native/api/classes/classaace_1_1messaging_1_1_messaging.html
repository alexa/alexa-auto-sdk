<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Alexa Auto SDK: aace::messaging::Messaging Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="aace-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Alexa Auto SDK
   &#160;<span id="projectnumber">4.1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceaace.html">aace</a></li><li class="navelem"><b>messaging</b></li><li class="navelem"><a class="el" href="classaace_1_1messaging_1_1_messaging.html">Messaging</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classaace_1_1messaging_1_1_messaging-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">aace::messaging::Messaging Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a8b0aec4199d79f3a1ceb9cf640a17fb6"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaace_1_1messaging_1_1_messaging.html#a8b0aec4199d79f3a1ceb9cf640a17fb6">ErrorCode</a> = MessagingEngineInterface::ErrorCode</td></tr>
<tr class="separator:a8b0aec4199d79f3a1ceb9cf640a17fb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa70529b477113d86c1cf2f2d9bb9b0b6"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaace_1_1messaging_1_1_messaging.html#aa70529b477113d86c1cf2f2d9bb9b0b6">ConnectionState</a> = MessagingEngineInterface::ConnectionState</td></tr>
<tr class="separator:aa70529b477113d86c1cf2f2d9bb9b0b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc8737f2c9a630793c570482266c0c55"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaace_1_1messaging_1_1_messaging.html#abc8737f2c9a630793c570482266c0c55">PermissionState</a> = MessagingEngineInterface::PermissionState</td></tr>
<tr class="separator:abc8737f2c9a630793c570482266c0c55"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a99ba888d9a757817fb0edcf4de845cfe"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaace_1_1messaging_1_1_messaging.html#a99ba888d9a757817fb0edcf4de845cfe">sendMessage</a> (const std::string &amp;token, const std::string &amp;message, const std::string &amp;recipients)=0</td></tr>
<tr class="separator:a99ba888d9a757817fb0edcf4de845cfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adae9c5df0e8a1b5723fecefd2f677f0c"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaace_1_1messaging_1_1_messaging.html#adae9c5df0e8a1b5723fecefd2f677f0c">uploadConversations</a> (const std::string &amp;token)=0</td></tr>
<tr class="separator:adae9c5df0e8a1b5723fecefd2f677f0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf53ed5e18038e934141b122d02743d4"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaace_1_1messaging_1_1_messaging.html#aaf53ed5e18038e934141b122d02743d4">updateMessagesStatus</a> (const std::string &amp;token, const std::string &amp;conversationId, const std::string &amp;status)=0</td></tr>
<tr class="separator:aaf53ed5e18038e934141b122d02743d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0e38e8653ffbfb1bb5bc8cca55274ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaace_1_1messaging_1_1_messaging.html#ac0e38e8653ffbfb1bb5bc8cca55274ca">sendMessageSucceeded</a> (const std::string &amp;token)</td></tr>
<tr class="separator:ac0e38e8653ffbfb1bb5bc8cca55274ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67d5c75859171895cf5781086f567919"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaace_1_1messaging_1_1_messaging.html#a67d5c75859171895cf5781086f567919">sendMessageFailed</a> (const std::string &amp;token, <a class="el" href="classaace_1_1messaging_1_1_messaging.html#a8b0aec4199d79f3a1ceb9cf640a17fb6">ErrorCode</a> code, const std::string &amp;message=&quot;&quot;)</td></tr>
<tr class="separator:a67d5c75859171895cf5781086f567919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa197b45ff57fd137480b18ff8f0d9cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaace_1_1messaging_1_1_messaging.html#afa197b45ff57fd137480b18ff8f0d9cd">conversationsReport</a> (const std::string &amp;token, const std::string &amp;conversations)</td></tr>
<tr class="separator:afa197b45ff57fd137480b18ff8f0d9cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac000677cb85763161fc18d852eb3d663"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaace_1_1messaging_1_1_messaging.html#ac000677cb85763161fc18d852eb3d663">updateMessagesStatusSucceeded</a> (const std::string &amp;token)</td></tr>
<tr class="separator:ac000677cb85763161fc18d852eb3d663"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeac6a0a8cc3ee421b406077ff184ad60"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaace_1_1messaging_1_1_messaging.html#aeac6a0a8cc3ee421b406077ff184ad60">updateMessagesStatusFailed</a> (const std::string &amp;token, <a class="el" href="classaace_1_1messaging_1_1_messaging.html#a8b0aec4199d79f3a1ceb9cf640a17fb6">ErrorCode</a> code, const std::string &amp;message=&quot;&quot;)</td></tr>
<tr class="separator:aeac6a0a8cc3ee421b406077ff184ad60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82badff7bcfd0175ecaadf2ddb6fd9b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaace_1_1messaging_1_1_messaging.html#a82badff7bcfd0175ecaadf2ddb6fd9b5">updateMessagingEndpointState</a> (<a class="el" href="classaace_1_1messaging_1_1_messaging.html#aa70529b477113d86c1cf2f2d9bb9b0b6">ConnectionState</a> connectionState, <a class="el" href="classaace_1_1messaging_1_1_messaging.html#abc8737f2c9a630793c570482266c0c55">PermissionState</a> sendPermission, <a class="el" href="classaace_1_1messaging_1_1_messaging.html#abc8737f2c9a630793c570482266c0c55">PermissionState</a> readPermission)</td></tr>
<tr class="separator:a82badff7bcfd0175ecaadf2ddb6fd9b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classaace_1_1messaging_1_1_messaging.html">Messaging</a> should be extended to allow a user to use Alexa to interact with a device that provides Short <a class="el" href="classaace_1_1messaging_1_1_messaging.html">Messaging</a> Service (SMS) capabilities, such as a connected mobile phone.</p>
<dl class="section note"><dt>Note</dt><dd>The device is referred to as the messaging endpoint.</dd></dl>
<p>The platform implementation is responsible for uploading unread messages to the cloud when the messaging endpoint is connected, and when new messages are received. Alexa reads messages in the order they are uploaded. Additionally, the platform implementation is responsible for sending messages, updating message status, and providing the messaging endpoint connection state and permissions.</p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000058">Deprecated:</a></b></dt><dd>This platform interface is deprecated. Use the Alexa Auto Services Bridge (AASB) message broker to publish and subscribe to AASB messages instead. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classaace_1_1core_1_1_message_broker.html">aace::core::MessageBroker</a> </dd></dl>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a8b0aec4199d79f3a1ceb9cf640a17fb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b0aec4199d79f3a1ceb9cf640a17fb6">&#9670;&nbsp;</a></span>ErrorCode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using aace::messaging::Messaging::ErrorCode =  MessagingEngineInterface::ErrorCode</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Describes the <code>ErrorCode</code> for failed responses. </p>

</div>
</div>
<a id="aa70529b477113d86c1cf2f2d9bb9b0b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa70529b477113d86c1cf2f2d9bb9b0b6">&#9670;&nbsp;</a></span>ConnectionState</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using aace::messaging::Messaging::ConnectionState =  MessagingEngineInterface::ConnectionState</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Describes the <code>ConnectionState</code> of the messaging endpoint. </p>

</div>
</div>
<a id="abc8737f2c9a630793c570482266c0c55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc8737f2c9a630793c570482266c0c55">&#9670;&nbsp;</a></span>PermissionState</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using aace::messaging::Messaging::PermissionState =  MessagingEngineInterface::PermissionState</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Describes the <code>PermissionState</code> of the messaging endpoint. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a99ba888d9a757817fb0edcf4de845cfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99ba888d9a757817fb0edcf4de845cfe">&#9670;&nbsp;</a></span>sendMessage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void aace::messaging::Messaging::sendMessage </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>recipients</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Notifies the platform implementation to send an SMS message via the messaging endpoint. The message text contains a short lived URL that contains the audio data from which the message was generated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">token</td><td>The identifier for the request. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>The body of the message, which includes the text and a URL pointing to the audio the audio data from which the message was generated. The text and the URL are separated by a '<br />
' character. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">recipients</td><td>JSON data containing the recipients of the message. <div class="fragment"><div class="line">{</div><div class="line">    &quot;recipients&quot; : [</div><div class="line">        {</div><div class="line">            &quot;address&quot; : &quot;{{STRING}}&quot;,</div><div class="line">            &quot;addressType&quot; : &quot;PhoneNumberAddress&quot;</div><div class="line">        }</div><div class="line">    ]</div><div class="line">}</div></div><!-- fragment --> <ul>
<li>recipients (required) : The list of phone numbers to which the user intends to send the message. </li>
<li>address (required) : The phone number of the recipient. </li>
<li>addressType (required) : Describes the type of value <code>address</code> contains. Currently, only "PhoneNumberAddress" is supported. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adae9c5df0e8a1b5723fecefd2f677f0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adae9c5df0e8a1b5723fecefd2f677f0c">&#9670;&nbsp;</a></span>uploadConversations()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void aace::messaging::Messaging::uploadConversations </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>token</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Notifies the platform implementation to upload all unread messages to the cloud. This method is called if message playback is interrupted or when Alexa has finished reading all messages. This ensures that the cloud and the messaging endpoint stay in sync with the status of unread messages. Upload messages via the <code>conversationsReport</code> API using the token received.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">token</td><td>The identifier for the request. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaf53ed5e18038e934141b122d02743d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf53ed5e18038e934141b122d02743d4">&#9670;&nbsp;</a></span>updateMessagesStatus()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void aace::messaging::Messaging::updateMessagesStatus </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>conversationId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Notifies the platform implementation that a message has been read, and therefore the messaging device must update the message status to reflect that. The platform implementation is responsible for maintaining the list of unread messages. It must send a response to the cloud via <code>updateMessagesStatusSucceeded</code> or <code>updateMessagesStatusFailed</code> depending on the result of the status update.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">token</td><td>The identifier for the request. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">conversationId</td><td>The identifier for the conversation whose status will be updated. This is the value provided by the platform via the <code>conversationsReport</code> API. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>Contains the set of message identifiers that need to be updated to the associated status. <div class="fragment"><div class="line">{</div><div class="line">    &quot;statusMap&quot; : {</div><div class="line">        &quot;read&quot; : [{{STRING}}],</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> <ul>
<li>read The list of message ids that were read in the associated <code>conversationId</code>. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac0e38e8653ffbfb1bb5bc8cca55274ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0e38e8653ffbfb1bb5bc8cca55274ca">&#9670;&nbsp;</a></span>sendMessageSucceeded()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aace::messaging::Messaging::sendMessageSucceeded </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>token</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Notifies the cloud that the <code>sendMessage</code> request succeeded.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">token</td><td>The token received from the <code>sendMessage</code> request. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a67d5c75859171895cf5781086f567919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67d5c75859171895cf5781086f567919">&#9670;&nbsp;</a></span>sendMessageFailed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aace::messaging::Messaging::sendMessageFailed </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classaace_1_1messaging_1_1_messaging.html#a8b0aec4199d79f3a1ceb9cf640a17fb6">ErrorCode</a>&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>message</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Notifies the cloud that the <code>sendMessage</code> request failed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">token</td><td>The token received from the <code>sendMessage</code> request. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">code</td><td>The error code describing the reason for the failure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>Optional error message describing the failure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afa197b45ff57fd137480b18ff8f0d9cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa197b45ff57fd137480b18ff8f0d9cd">&#9670;&nbsp;</a></span>conversationsReport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aace::messaging::Messaging::conversationsReport </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>conversations</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates the cloud with the list of unread messages that Alexa will play back. Call this method when the messaging endpoint is connected and read permission has been granted. Additionally, use this method to reply to a <code>uploadConversations</code> request, passing back the token that was sent in that request.</p>
<dl class="section note"><dt>Note</dt><dd>The conversation report is a JSON Array and therefore must be enclosed in brackets <code>[]</code>.</dd></dl>
<p>The list of conversations is a JSON array. Each conversation must contain a unique identifier that will be used by the <code>updateMessagesStatus</code> request to identify the conversation whose messages must be updated.</p>
<p>The "otherParticipants" field of the conversation report contains the phone numbers of all participants in the conversation, except for the phone number of the messaging endpoint.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">The</td><td>token received from <code>uploadConversations</code>, otherwise an empty string. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">conversations</td><td>A JSON array representing the unread messages of the messaging endpoint. <div class="fragment"><div class="line">[</div><div class="line">    {</div><div class="line">        &quot;id&quot;: &quot;{{STRING}}&quot;,</div><div class="line">        &quot;otherParticipants&quot;: [</div><div class="line">            {</div><div class="line">                &quot;address&quot;:&quot;{{STRING}}&quot;,</div><div class="line">                &quot;addressType&quot;:&quot;PhoneNumberAddress&quot;</div><div class="line">            }</div><div class="line">        ],</div><div class="line">        &quot;messages&quot;: [</div><div class="line">            {</div><div class="line">                &quot;id&quot;:&quot;{{STRING}}&quot;,</div><div class="line">                &quot;payload&quot;: {</div><div class="line">                    &quot;@type&quot;:&quot;text&quot;,</div><div class="line">                    &quot;text&quot;:&quot;{{STRING}}&quot;</div><div class="line">                },</div><div class="line">                &quot;status&quot;:&quot;unread&quot;,</div><div class="line">                &quot;createdTime&quot;:&quot;{{STRING}}&quot;,</div><div class="line">                &quot;sender&quot;: {</div><div class="line">                    &quot;address&quot;:&quot;{{STRING}}&quot;,</div><div class="line">                    &quot;addressType&quot;:&quot;PhoneNumberAddress&quot;</div><div class="line">                }</div><div class="line">            }</div><div class="line">        ],</div><div class="line">        &quot;unreadMessageCount&quot;: {{INTEGER}}</div><div class="line">    }</div><div class="line">]</div></div><!-- fragment --> <ul>
<li>id A unique identifier generated by the application for the conversation. </li>
<li>otherParticipants Additional recipients of the message used for group conversation or empty. </li>
<li>otherParticipants.address The phone number of the recipient. </li>
<li>otherParticipants.addressType Hard coded string "PhoneNumberAddress" indicating the value of the <code>address</code> field. </li>
<li>messages.id A unique identifier generated by the application for the message. </li>
<li>messages.payload. Hard coded string "text" indicating the value of the <code>text</code> field. </li>
<li>messages.text The text for the message. </li>
<li>messages.createdTime (optional) The ISO 8601 timestamp of when the message was created on the device. </li>
<li>messages.sender.address The phone number of the sender. </li>
<li>messages.sender.addressType Hard coded string "PhoneNumberAddress" indicating the value of the <code>address</code> field. </li>
<li>unreadMessageCount The total number of unread messages in this conversation. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac000677cb85763161fc18d852eb3d663"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac000677cb85763161fc18d852eb3d663">&#9670;&nbsp;</a></span>updateMessagesStatusSucceeded()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aace::messaging::Messaging::updateMessagesStatusSucceeded </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>token</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Notifies the cloud that the <code>updateMessagesStatus</code> request succeeded.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">token</td><td>The token received from the </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classaace_1_1messaging_1_1_messaging.html#aaf53ed5e18038e934141b122d02743d4">Messaging::updateMessagesStatus</a> request. </dd></dl>

</div>
</div>
<a id="aeac6a0a8cc3ee421b406077ff184ad60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeac6a0a8cc3ee421b406077ff184ad60">&#9670;&nbsp;</a></span>updateMessagesStatusFailed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aace::messaging::Messaging::updateMessagesStatusFailed </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classaace_1_1messaging_1_1_messaging.html#a8b0aec4199d79f3a1ceb9cf640a17fb6">ErrorCode</a>&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>message</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Notifies the cloud that the <code>updateMessagesStatus</code> request failed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">token</td><td>The token received from the </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classaace_1_1messaging_1_1_messaging.html#aaf53ed5e18038e934141b122d02743d4">Messaging::updateMessagesStatus</a> request. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">code</td><td>The error code describing the reason for the failure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>Optional error message describing the failure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a82badff7bcfd0175ecaadf2ddb6fd9b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82badff7bcfd0175ecaadf2ddb6fd9b5">&#9670;&nbsp;</a></span>updateMessagingEndpointState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aace::messaging::Messaging::updateMessagingEndpointState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classaace_1_1messaging_1_1_messaging.html#aa70529b477113d86c1cf2f2d9bb9b0b6">ConnectionState</a>&#160;</td>
          <td class="paramname"><em>connectionState</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classaace_1_1messaging_1_1_messaging.html#abc8737f2c9a630793c570482266c0c55">PermissionState</a>&#160;</td>
          <td class="paramname"><em>sendPermission</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classaace_1_1messaging_1_1_messaging.html#abc8737f2c9a630793c570482266c0c55">PermissionState</a>&#160;</td>
          <td class="paramname"><em>readPermission</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allows the platform implementation to provide the connection state of the messaging endpoint, and whether send and read permissions are granted by the user.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">connectionState</td><td><code>CONNECTED</code> If the messaging endpoint is connected, else <code>DISCONNECTED</code> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sendPermission</td><td><code>ON</code> If the messaging endpoint can send messages, else <code>OFF</code> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">readPermission</td><td><code>ON</code> If the messaging endpoint messages be read, else <code>OFF</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<html>
  <body>
    <hr style="height:1px;border-width:0;color:gray;background-color:gray">
    <p style="text-align:left;">
      Alexa Auto SDK 4.1.1 - Copyright 2017-2022 Amazon.com, Inc. or its affiliates. All Rights Reserved.
      <span style="float:right;">
        Licensed under the <a HREF=http://aws.amazon.com/apache2.0/>Apache License, Version 2.0</a>
      </span>
    </p>
  </body>
</html>
